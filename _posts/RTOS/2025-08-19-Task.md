---
title: "TASK"
date: 2025-08-19 21:59:01 +0800
categories: [RTOS]
tags: [RTOS]
---

# 🐰 Task Operations trong RTOS

## 🐼 Tổng quan 

- Chia 1 project thành nhiều task.
- Thời gian chuyển trạng thái rất nhỏ => các task chạy cùng lúc.
- Thực tế lại 1 thời điểm chỉ có 1 task Running (đối với 1 core).


## 🐣 Tạo task
```c
BaseType_t xTaskCreate(
    TaskFunction_t pvTaskCode,
    const char * const pcName,
    configSTACK_DEPTH_TYPE usStackDepth,
    void *pvParameters,
    UBaseType_t uxPriority,
    TaskHandle_t *pxCreatedTask
    );
```
- `pvTaskCode 🧩`: Hàm thực thi (void task(void* arg)).
- `pcName 🏷️`: Tên task.
- `usStackDepth 📏`: Kích thước stack (word, không phải byte). với stm32 1 word 4 byte.
- `pvParameters 📦`: Tham số truyền vào.
- `uxPriority 🎚️`: Độ ưu tiên.
- `pxCreatedTask 🪪`: Handle lưu lại để quản.

![alt text](/assets/RTOS/task.png)

## 🦊 Trạng thái của task

- `Ready :` Chờ 1 task khác có mật độ ưu tiên cao hơn hoặc bằng đang running.
- `Running :` Chiếm tài nguyên CPU và thực hiện câu lệnh của nó.
- `Blocked :` Task đang chờ sự kiện nào đó hoặc task đang delay.
- `Suspended :` Trạng thái này cũng giống như block nhưng nó dùng lệnh nếu muốn đưa task vào trạng thái hoạt động thì `vTaskResume()`.

![alt text](/assets/RTOS/task_state.png)

## 🐨 Task properties

- Mỗi task sẽ được gán:
- Một mức ưu tiên (priority).
- Một cái tên (name).
- Kích thước ngăn xếp (Size).
- Tham số truyền vào (parameter).
- Một con trỏ đại diện (xTaskHandle) hiểu như ID.



